#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º –Ω–∞ Arch CachyOS
# –ê–≤—Ç–æ—Ä: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
# –î–∞—Ç–∞: $(date)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if [[ $EUID -ne 0 ]]; then
   echo "‚ùå –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ root (sudo)!"
   exit 1
fi

echo "========================================"
echo "üöÄ –ù–∞—á–∏–Ω–∞—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø—Ä–æ–≥—Ä–∞–º–º –Ω–∞ Arch CachyOS"
echo "========================================"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
echo "üîÑ –û–±–Ω–æ–≤–ª—è—é —Å–∏—Å—Ç–µ–º—É..."
pacman -Syu --noconfirm

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã!"
    exit 1
fi

echo "‚úÖ –°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"

# –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ pacman
PACMAN_PACKAGES=(
    # –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
    notepadqq
    
    # OBS Studio –∏ –º–µ–¥–∏–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    obs-studio
    vlc
    ffmpeg
    
    # Steam –∏ –∏–≥—Ä—ã
    steam
    steam-native-runtime
    
    # –ì—Ä–∞—Ñ–∏–∫–∞ –∏ –¥–∏–∑–∞–π–Ω
    gimp
    blender
    
    # –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
    telegram-desktop
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    keepassxc
    veracrypt
    
    # –í–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    kdenlive
    frei0r-plugins
    audacity
    
    # Flatpak –¥–ª—è Flathub –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    flatpak
)

echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ pacman:"
echo "----------------------------------------"
for pkg in "${PACMAN_PACKAGES[@]}"; do
    echo "  ‚Ä¢ $pkg"
done
echo "----------------------------------------"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ pacman
echo "‚è≥ –ù–∞—á–∏–Ω–∞—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ pacman..."
pacman -S --noconfirm "${PACMAN_PACKAGES[@]}"

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ pacman!"
    exit 1
fi

echo "‚úÖ –í—Å–µ –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ pacman —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Flatpak - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Flathub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo "========================================"
echo "üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é Flatpak –∏ Flathub..."
echo "========================================"

echo "‚ûï –î–æ–±–∞–≤–ª—è—é Flathub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
sudo -u $SUDO_USER flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo

if [ $? -ne 0 ]; then
    echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å Flathub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:"
    echo "    flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo"
else
    echo "‚úÖ Flathub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!"
fi

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
echo "========================================"
echo "üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û–°–õ–ï –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ò"
echo "========================================"
echo ""
echo "–í–ê–ñ–ù–û: –î–ª—è –ø–æ–ª–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Flatpak –¢–†–ï–ë–£–ï–¢–°–Ø –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã!"
echo ""
echo "1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä:"
echo "   sudo reboot"
echo ""
echo "2. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≠–¢–£ –û–î–ù–£ –ö–û–ú–ê–ù–î–£ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö Flatpak –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:"
echo ""
echo "   flatpak install flathub org.jupyter.JupyterLab md.obsidian.Obsidian com.github.unrud.VideoDownloader ru.linux_gaming.PortProton -y"
echo ""
echo "–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:"
echo "   ‚Ä¢ JupyterLab - –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è"
echo "   ‚Ä¢ Obsidian - –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–º–µ—Ç–æ–∫"
echo "   ‚Ä¢ Video Downloader - –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤–∏–¥–µ–æ"
echo "   ‚Ä¢ PortProton - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Windows –∏–≥—Ä"
echo ""
echo "========================================"
echo "üéâ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è."
echo "========================================"
echo ""
echo "üîÑ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ò–¢–ï –°–ò–°–¢–ï–ú–£ –°–ï–ô–ß–ê–°:"
echo "   sudo reboot"